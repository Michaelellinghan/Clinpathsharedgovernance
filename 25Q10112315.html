<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEQAS Case 25Q10112315 - SGC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nhs-blue { background-color: #005EB8; }
        .nhs-dark-blue { background-color: #003087; }
        .nhs-text-blue { color: #005EB8; }
        .nhs-text-dark-blue { color: #003087; }
        .results-table { font-size: 0.9rem; }
        .results-table td { padding: 0.25rem 0.5rem; border-bottom: 1px solid #e5e7eb; }
        .results-table tr:last-child td { border-bottom: none; }
        .feature-checkbox:disabled { opacity: 0.7; }
        .feature-label:has(.feature-checkbox:disabled) { cursor: not-allowed; color: #6b7280; }
        .highlight-correct { background-color: #dcfce7; color: #166534; }
        /* Modal Styles */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.85); align-items: center; justify-content: center; }
        .modal-content { margin: auto; display: block; max-width: 85%; max-height: 85%; transition: transform 0.2s ease; cursor: zoom-in; }
        .modal-content.zoomed { transform: scale(2); cursor: zoom-out; }
        .modal-close { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; transition: 0.3s; cursor: pointer; }
        .modal-nav { cursor: pointer; position: absolute; top: 50%; width: auto; padding: 16px; margin-top: -22px; color: white; font-weight: bold; font-size: 20px; transition: 0.3s ease; user-select: none; background-color: rgba(0,0,0,0.3); }
        .modal-nav:hover { background-color: rgba(0,0,0,0.8); }
        .modal-prev { left: 0; border-radius: 0 3px 3px 0; }
        .modal-next { right: 0; border-radius: 3px 0 0 3px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="header-placeholder"></div>

    <main class="py-16">
        <div class="container mx-auto px-6 max-w-7xl">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold nhs-text-dark-blue">Digital Morphology Case Library</h2>
                <p class="text-lg text-gray-600">Case Study: 25Q10112315</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-2xl font-semibold nhs-text-dark-blue border-b pb-2 mb-4">Case Information</h3>
                        <div id="initial-info">
                            <p><strong>Patient:</strong> 68-year-old male.</p>
                             <h4 class="font-bold mt-4">Initial Full Blood Count</h4>
                            <table class="w-full results-table mt-2">
                                <tr><td>WBC</td><td class="font-mono text-right">3.5 x10⁹/L</td></tr>
                                <tr><td>RBC</td><td class="font-mono text-right">2.50 x10¹²/L</td></tr>
                                <tr><td>HGB</td><td class="font-mono text-right">80 g/L</td></tr>
                                <tr><td>HCT</td><td class="font-mono text-right">0.245 L/L</td></tr>
                                <tr><td>MCV</td><td class="font-mono text-right">98.0 fL</td></tr>
                                <tr><td>MCH</td><td class="font-mono text-right">32.0 pg</td></tr>
                                <tr><td>MCHC</td><td class="font-mono text-right">327 g/L</td></tr>
                                <tr><td>PLT</td><td class="font-mono text-right">40 x10⁹/L</td></tr>
                            </table>
                        </div>
                        <div id="full-case-details" class="hidden mt-4 pt-4 border-t">
                            <h4 class="font-bold">Full Blood Count (Post-Morphology)</h4>
                             <table class="w-full results-table mt-2">
                                <tr><td>NEUT</td><td class="font-mono text-right">0.5 x10⁹/L (Severely Neutropenic)</td></tr>
                                <tr><td>LYMPH</td><td class="font-mono text-right">1.0 x10⁹/L</td></tr>
                                <tr><td>MONO</td><td class="font-mono text-right">0.1 x10⁹/L (Monocytopenic)</td></tr>
                                <tr><td>EO</td><td class="font-mono text-right">0.0 x10⁹/L</td></tr>
                                <tr><td>BASO</td><td class="font-mono text-right">0.0 x10⁹/L</td></tr>
                                <tr><td><b>BLAST</b></td><td class="font-mono text-right"><b>1.9 x10⁹/L (54% of WBC)</b></td></tr>
                            </table>
                             <div class="space-y-4 mt-4">
                                <h4 class="font-bold">Sysmex Scatterplot Analysis</h4>
                                 <img src="morphology/25Q10112315/WDF.PNG" alt="WDF Scatterplot" class="rounded-md w-full h-auto mt-2 shadow">
                                  <p class="text-sm mt-2"><b>WDF (White Cell Differential) Scatterplot:</b> This is the primary scatterplot for the white cell differential. The vertical axis (SFL - Side Fluorescence) measures the DNA and RNA content of cells, while the horizontal axis (SSC - Side Scatter) measures the internal complexity (granularity).
                                  <br>In this patient's plot, there is a large, dense population of cells (coloured purple) located in the upper-left area. This position signifies cells with very high fluorescence (high nucleic acid content, typical of immature blasts with large nuclei) and low-to-moderate internal complexity. This cluster is overwhelming the normal areas where we would expect to see distinct populations of mature lymphocytes (blue), monocytes (green), and neutrophils (light blue). The scarcity of dots in these mature cell areas visually confirms the severe neutropenia and monocytopenia reported in the differential.</p>
                                  <img src="morphology/25Q10112315/WNR.PNG" alt="WNR Scatterplot" class="rounded-md w-full h-auto mt-2 shadow">
                                    <p class="text-sm mt-2"><b>WNR (White Cell Nucleated Red Cell) Scatterplot:</b> This channel uses a specific reagent to lyse mature red cells and strip the cytoplasm from white cells, allowing for a clear separation of nucleated cells. It's primarily used to count Nucleated Red Blood Cells (NRBCs) and provide an accurate total white cell count, even in the presence of interferences.
                                    <br>The plot shows the vast majority of cellular events are clustered in the 'WBC' zone on the left. Crucially, the 'NRBC' area on the right is empty. This confirms that the large, abnormal population seen on the WDF plot is genuinely of leucocyte origin and not a massive number of NRBCs, which can sometimes be seen in other severe haematological conditions. It confirms the blasts are being correctly identified as part of the white cell population.</p>
                                   <img src="morphology/25Q10112315/WPC.PNG" alt="WPC Scatterplot" class="rounded-md w-full h-auto mt-2 shadow">
                                    <p class="text-sm mt-2"><b>WPC (White Precursor Cell) Scatterplot:</b> This is a specialized, reflex channel that is automatically triggered when the analyser detects abnormal cell populations, like the one in this case. It uses a different reagent system designed to provide superior separation between blast cells and other atypical or abnormal lymphoid cells.
                                    <br>The plot provides a powerful confirmation of the findings. A very distinct and tightly clustered population is seen in the upper region, clearly demarcated as blasts. This separation is much cleaner than in the WDF plot and leaves no doubt about the presence of a large, homogenous population of pathological blast cells. This high degree of confidence from the analyser is a critical alert for the laboratory scientist.</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-2xl font-semibold nhs-text-dark-blue border-b pb-2 mb-4">Blood Film Examination</h3>
                        <div class="mb-6">
                            <h4 class="font-semibold text-lg">Red Cell Picture</h4>
                            <div id="red-cell-container" class="cursor-pointer">
                                <img id="red-cell-img" src="morphology/25Q10112315/red cells.PNG" alt="Overall red cell picture for case" class="rounded-md w-full h-auto mt-2 shadow">
                            </div>
                        </div>
                        <div>
                             <h4 class="font-semibold text-lg">White Cell Gallery</h4>
                             <p class="text-sm text-gray-600 mb-2">Click a thumbnail to view the full-size image.</p>
                             <div id="wbc-gallery" class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2 max-h-96 overflow-y-auto pr-2">
                                 </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-2xl font-semibold nhs-text-dark-blue border-b pb-2 mb-4">Morphology Checklist</h3>
                    <p class="text-gray-600 mb-4">Select up to five key morphological features you have identified.</p>
                    
                    <div id="feature-checklist" class="space-y-4 max-h-96 overflow-y-auto pr-2">
                        </div>

                    <button id="reveal-btn" class="w-full mt-6 bg-black text-white font-bold py-3 px-4 rounded-lg hover:bg-gray-800 transition duration-300">See Results</button>

                    <div id="analysis-section" class="hidden mt-6 border-t pt-6">
                        <h3 class="text-2xl font-semibold nhs-text-dark-blue mb-4">Analysis & Peer Consensus</h3>
                        
                        <div class="mb-6">
                            <h4 class="text-lg font-bold">Your Selected Features:</h4>
                            <ul id="user-choices" class="list-disc list-inside mt-2"></ul>
                        </div>
                        
                        <div class="mb-6">
                            <h4 class="text-lg font-bold">Expert Commentary</h4>
                            <div class="mt-2 p-4 bg-gray-100 rounded-md text-gray-700">
                                <p id="expert-comment-text"></p>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-lg font-bold">Top 10 Peer-Reported Features</h4>
                            <table class="w-full text-left mt-2 text-sm">
                                <thead>
                                    <tr class="bg-gray-50"><th class="p-2">Feature</th><th class="p-2 text-right">No. of Labs</th></tr>
                                </thead>
                                <tbody id="top-features-table"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="image-modal" class="modal">
        <span class="modal-close" id="modal-close-btn">&times;</span>
        <a class="modal-prev modal-nav" id="modal-prev-btn">&#10094;</a>
        <a class="modal-next modal-nav" id="modal-next-btn">&#10095;</a>
        <img class="modal-content" id="modal-img">
    </div>

    <div id="footer-placeholder"></div>

      <script src="js/component-loader.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            feather.replace();
        });
   </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Mobile menu toggle ---
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if(mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            }
            feather.replace();

            // --- Page Data for Case ---
            const imageFilenames = ["BL_2397861.jpg", "BL_2397862.jpg", "BL_2397863.jpg", "BL_2397864.jpg", "BL_2397865.jpg", "BL_2397869.jpg", "BL_2397870.jpg", "BL_2397871.jpg", "BL_2397876.jpg", "BL_2397877.jpg", "BL_2397879.jpg", "BL_2397882.jpg", "BL_2397887.jpg", "BL_2397888.jpg", "BL_2397889.jpg", "BL_2397890.jpg", "BL_2397891.jpg", "BL_2397892.jpg", "BL_2397893.jpg", "BL_2397894.jpg", "BL_2397895.jpg", "BL_2397896.jpg", "BL_2397897.jpg", "BL_2397901.jpg", "BL_2397902.jpg", "BL_2397903.jpg", "BL_2397905.jpg", "BL_2397907.jpg", "BL_2397909.jpg", "BL_2397910.jpg", "BL_2397911.jpg", "BL_2397915.jpg", "BL_2397918.jpg", "BL_2397920.jpg", "BL_2397921.jpg", "BL_2397922.jpg", "BL_2397926.jpg", "BL_2397927.jpg", "BL_2397928.jpg", "BL_2397929.jpg", "BL_2397931.jpg", "BL_2397934.jpg", "BL_2397939.jpg", "BL_2397941.jpg", "BL_2397942.jpg", "BL_2397943.jpg", "BL_2397944.jpg", "BL_2397946.jpg", "BL_2397949.jpg", "BL_2397950.jpg", "BL_2397951.jpg", "BL_2397953.jpg", "BL_2397954.jpg", "BL_2397955.jpg", "BL_2397956.jpg", "BL_2397957.jpg", "BL_2397960.jpg", "BL_2397961.jpg", "BL_2397962.jpg", "BL_2397963.jpg", "BL_2397964.jpg", "BL_2397965.jpg", "BL_2397967.jpg", "BL_2397968.jpg", "BL_2397969.jpg", "BL_2397970.jpg", "BL_2397972.jpg", "BL_2397973.jpg", "BL_2397974.jpg", "BL_2397975.jpg", "BL_2397976.jpg", "BL_2397977.jpg", "BL_2397979.jpg", "BL_2397980.jpg", "BL_2397981.jpg", "BL_2397982.jpg", "BL_2397984.jpg", "BL_2397985.jpg", "BL_2397986.jpg", "BL_2397988.jpg", "BL_2397989.jpg", "BL_2397990.jpg", "BL_2397991.jpg", "BL_2397992.jpg", "BL_2397993.jpg", "BL_2397996.jpg", "BL_2397997.jpg", "BL_2397998.jpg", "BL_2397999.jpg", "BL_2398000.jpg", "BL_2398001.jpg", "BL_2398003.jpg", "BL_2398004.jpg", "BL_2398008.jpg", "BL_2398012.jpg", "BL_2398013.jpg", "BL_2398016.
