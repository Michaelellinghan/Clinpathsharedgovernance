<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsletter Crossword - SGC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#005EB8">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nhs-blue { background-color: #005EB8; }
        .nhs-dark-blue { background-color: #003087; }
        .nhs-light-grey { background-color: #F0F4F5; }
        .nhs-text-blue { color: #005EB8; }
        .nhs-text-dark-blue { color: #003087; }
        .crossword-grid {
            display: grid;
            grid-template-columns: repeat(13, 1fr); /* Max grid size based on provided crosswords */
            gap: 2px;
            max-width: 500px; /* Adjust as needed */
            margin: 0 auto;
        }
        .grid-cell {
            aspect-ratio: 1 / 1;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.1rem;
            text-transform: uppercase;
            background-color: #f0f4f5; /* NHS Light Grey for empty cells */
            position: relative;
            border: 1px solid #d1d5db; /* Light grey border */
            color: #374151; /* Darker text for input */
        }
        .grid-cell.black {
            background-color: #212529; /* Black squares */
            border: 1px solid #212529;
        }
        .grid-cell input {
            width: 100%;
            height: 100%;
            text-align: center;
            background: transparent;
            border: none;
            outline: none;
            font-size: 1.1rem;
            text-transform: uppercase;
            color: #374151;
            padding: 0;
            margin: 0;
            cursor: text;
        }
        .grid-cell input:focus {
            background-color: #dbeafe; /* Light blue on focus */
        }
        .grid-cell .clue-number {
            position: absolute;
            top: 2px;
            left: 2px;
            font-size: 0.6rem;
            font-weight: bold;
            color: #003087;
        }
        .grid-cell.correct {
            background-color: #d1fae5; /* Light green for correct */
        }
        .grid-cell.incorrect {
            background-color: #fee2e2; /* Light red for incorrect */
        }
        .grid-cell.revealed {
            background-color: #bfdbfe; /* Light blue for revealed */
        }
        .clue-list li {
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            text-indent: -1.5rem;
        }
        .clue-list li.found {
            text-decoration: line-through;
            color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-6 py-3 flex justify-between items-center">
            <a href="index.html" class="cursor-pointer flex items-center space-x-3">
                <img src="logo.jpg" alt="Clinical Pathology Shared Governance Council Logo" class="h-16 w-auto">
            </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="index.html" class="font-semibold text-gray-600 hover:nhs-text-blue transition duration-300">Home</a>
                <a href="projects.html" class="font-semibold text-gray-600 hover:nhs-text-blue transition duration-300">Projects</a>
                <a href="games.html" class="font-semibold text-nhs-blue transition duration-300">Games</a>
                <a href="newsletters.html" class="font-semibold text-gray-600 hover:nhs-text-blue transition duration-300">Newsletters</a>
                <a href="about.html" class="font-semibold text-gray-600 hover:nhs-text-blue transition duration-300">About Us</a>
                <a href="links.html" class="font-semibold text-gray-600 hover:nhs-text-blue transition duration-300">Links</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden"><i data-feather="menu"></i></button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white px-6 pb-4">
             <a href="index.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Home</a>
            <a href="projects.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Projects</a>
            <a href="games.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Games</a>
            <a href="newsletters.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Newsletters</a>
            <a href="about.html" class="block py-2 text-gray-600 hover:nhs-text-blue">About Us</a>
            <a href="social.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Social Media</a>
            <a href="links.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Learning Links</a>
            <a href="contact.html" class="block py-2 text-gray-600 hover:nhs-text-blue">Suggestions</a>
        </div>
    </header>

    <main class="py-16 bg-nhs-light-grey">
        <div class="container mx-auto px-6 max-w-5xl text-center">
            <a href="games.html" class="inline-flex items-center nhs-text-blue font-semibold mb-8">
                <i data-feather="arrow-left" class="w-4 h-4 mr-2"></i>Back to Games
            </a>
            <h2 id="crossword-title" class="text-3xl font-bold nhs-text-dark-blue mb-4"></h2>
            <p class="text-gray-600 mb-8 max-w-2xl mx-auto">Fill in the crossword. Click 'Check Answers' to see how you're doing, or 'Reveal All' if you're stuck!</p>

            <div class="flex flex-col lg:flex-row gap-8 bg-white p-6 rounded-lg shadow-md">
                <div class="w-full lg:w-2/3">
                    <div id="crossword-grid" class="crossword-grid">
                        </div>
                    <div class="flex justify-center gap-4 mt-6">
                        <button id="check-answers-btn" class="bg-nhs-blue text-white font-bold py-2 px-4 rounded-lg hover:bg-nhs-dark-blue transition duration-300">Check Answers</button>
                        <button id="reveal-all-btn" class="bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition duration-300">Reveal All</button>
                        <button id="new-crossword-btn" class="bg-gray-400 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-600 transition duration-300">New Crossword</button>
                    </div>
                </div>

                <div class="w-full lg:w-1/3 text-left">
                    <div class="mb-6">
                        <h3 class="text-xl font-bold nhs-text-dark-blue mb-2">Across</h3>
                        <ol id="across-clues" class="clue-list text-gray-700 text-sm">
                            </ol>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold nhs-text-dark-blue mb-2">Down</h3>
                        <ol id="down-clues" class="clue-list text-gray-700 text-sm">
                            </ol>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="nhs-dark-blue text-white py-8 mt-16">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2024 Clinical Pathology Shared Governance Council. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            feather.replace();

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if(mobileMenuButton) {
                mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            }

            const crosswordGridEl = document.getElementById('crossword-grid');
            const crosswordTitleEl = document.getElementById('crossword-title');
            const acrossCluesEl = document.getElementById('across-clues');
            const downCluesEl = document.getElementById('down-clues');
            const checkAnswersBtn = document.getElementById('check-answers-btn');
            const revealAllBtn = document.getElementById('reveal-all-btn');
            const newCrosswordBtn = document.getElementById('new-crossword-btn');

            let currentCrossword = null;
            const gridInputs = []; // To store references to input fields

            // Define your crosswords here based on the screenshots
            const crosswords = [
                {
                    title: "Puzzle of the Month Summer (July 2025)",
                    gridSize: { rows: 13, cols: 13 }, // Determined from screenshot
                    grid: [
                        " ", "1", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", "4", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "6", " ", " ", " ", " ", "7", " ", "8", " ", " ", "9", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", "10", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", "11", " ", " ", " ", " ", "12",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", "13", " ", " ", " ", " ", " ", "14", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "16", " ", " ", " ", " ", " ", " ", " ", "17", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "18", " ", " ", " ", " ", "19", " ", " ", " ", " ", "20", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "21", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", "22", " ", " ", " ", " ", " ",
                    ],
                    answers: {
                        across: {
                            2: { word: "SUMMER", start: { row: 1, col: 7 } }, // 2 Across is a bit of a guess on location
                            6: { word: "MAMMA", start: { row: 3, col: 0 } }, // Mamma from screenshot
                            8: { word: "SUNLIGHT", start: { row: 3, col: 7 } }, // SUNLIGHT from clue 8
                            11: { word: "TENT", start: { row: 7, col: 7 } }, // TENT from clue 11
                            13: { word: "CHINA", start: { row: 9, col: 3 } }, // CHINA from clue 13
                            15: { word: "WILDTHING", start: { row: 10, col: 9 } }, // WILDTHING from clue 15
                            16: { word: "BEACH", start: { row: 11, col: 0 } }, // BEACH from clue 16
                            17: { word: "CARNIVAL", start: { row: 11, col: 8 } }, // CARNIVAL from clue 17
                            18: { word: "TROPICAL", start: { row: 14, col: 0 } }, // TROPICAL from clue 18
                            20: { word: "FRUIT", start: { row: 14, col: 10 } }, // FRUIT from clue 20
                            22: { word: "SUMMER", start: { row: 18, col: 7 } } // SUMMER from clue 22
                        },
                        down: {
                            1: { word: "BRIGHTON", start: { row: 0, col: 1 } }, // BRIGHTON from clue 1
                            3: { word: "THAI", start: { row: 3, col: 12 } }, // THAI from clue 3
                            4: { word: "CORAL", start: { row: 1, col: 7 } }, // CORAL from clue 4
                            5: { word: "SHAKESPEARE", start: { row: 3, col: 10 } }, // SHAKESPEARE from clue 5
                            7: { word: "TIME", start: { row: 3, col: 5 } }, // TIME from clue 7
                            9: { word: "CAMEL", start: { row: 3, col: 8 } }, // CAMEL from clue 9
                            10: { word: "CLIMB", start: { row: 6, col: 5 } }, // CLIMB from clue 10
                            12: { word: "LIFEGUARDS", start: { row: 7, col: 12 } }, // LIFEGUARDS from clue 12
                            14: { word: "BREAD", start: { row: 9, col: 9 } }, // BREAD from clue 14
                            19: { word: "HAPPY", start: { row: 14, col: 5 } }, // HAPPY from clue 19
                            21: { word: "COLD", start: { row: 17, col: 0 } } // COLD from clue 21
                        }
                    },
                    clues: {
                        across: {
                            2: "What is the birthstone for July?",
                            6: "The \"dog days of summer\" are named after the Dog Star. What is the better known name of this star?",
                            8: "Plants use sunlight to make their own food. What is this process called?",
                            11: "What is the most visited tourist attraction in the world?",
                            13: "Which country holds the biggest waterpark in the world?",
                            15: "Which group had a Top 10 hit with Summer Summer in 2004?",
                            16: "Which feast day falls on July 15 every year?",
                            17: "Which British seaside attraction is 158 metres tall?",
                            18: "Complete the following lyric: \"Summer's here and the time is right for ____ ____ in the street.\"",
                            20: "What was the first name of Clegg in the sitcom Last of the Summer Wine?",
                            22: "Which large fruit with a compound in its commonly associated with summer?"
                        },
                        down: {
                            1: "The famous 1979 film \"Quadrophenia\" was filmed in which seaside town?",
                            3: "What country has the most coastline in the world?",
                            4: "What country has the most coastline in the world?",
                            5: "Who wrote \"A Midsummer Night's Dream\"?",
                            7: "What is the name of the fictional seaside town in the Australian soap, 'Home and Away'?",
                            9: "How many time zones are there in the United States?",
                            10: "Which Moroccan mammal is known to climb trees during the summer?",
                            12: "Which animals are employed as beach lifeguards in some U.S. states?",
                            14: "Which classic summer game was inspired by an empty pie tin?",
                            19: "Comedians Brian Conley, Shane Ritchie and Bradley Walsh all once worked for which holiday camp company?",
                            21: "Which large fruit with a compound in its commonly associated with summer?"
                        }
                    }
                },
                {
                    title: "Christmas Crackers (December 2024)",
                    gridSize: { rows: 13, cols: 13 }, // Determined from screenshot
                    grid: [
                        " ", " ", " ", " ", " ", " ", " ", " ", "1", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "4", " ", " ", " ", "5", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "9", " ", " ", " ", " ", " ", " ", "10", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", "12", " ", " ", " ", " ", " ", " ", "13", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ", " ",
                        "16", " ", " ", " ", " ", " ", " ", " ", " ", "17", " ", " ", " ",
                    ],
                    answers: {
                        across: {
                            4: { word: "SNOWBOARDER", start: { row: 3, col: 0 } },
                            5: { word: "CROSSROADS", start: { row: 3, col: 4 } },
                            9: { word: "CANDY", start: { row: 6, col: 0 } },
                            10: { word: "STOCKING", start: { row: 6, col: 7 } },
                            12: { word: "THIRTYFIRST", start: { row: 9, col: 3 } },
                            14: { word: "TINSEL", start: { row: 10, col: 0 } }, // Guessing based on common clues
                            16: { word: "SLEIGH", start: { row: 12, col: 0 } }
                        },
                        down: {
                            1: { word: "PRANCER", start: { row: 0, col: 8 } },
                            2: { word: "PUDDING", start: { row: 0, col: 12 } }, // Guessing this clue number and answer
                            3: { word: "GRINCH", start: { row: 0, col: 11 } }, // Guessing this clue number and answer
                            6: { word: "EIGHT", start: { row: 3, col: 5 } },
                            7: { word: "PENGUIN", start: { row: 6, col: 8 } },
                            8: { word: "LIGHTS", start: { row: 6, col: 10 } },
                            11: { word: "LOTTERY", start: { row: 7, col: 12 } }, // Guessing this clue number
                            13: { word: "TOASTIE", start: { row: 9, col: 10 } }, // Guessing this clue number
                            17: { word: "ICE", start: { row: 12, col: 9 } }
                        }
                    },
                    clues: {
                        across: {
                            4: "What athlete is warmest in winter?",
                            5: "What do you get when you cross a snowman and a vampire?",
                            9: "What kind of motorcycle does Santa ride?",
                            10: "How do snowmen eat for lunch?",
                            12: "How does Christmas Day end?",
                            14: "What do you call a old snowman?",
                            16: "What's every elf's favorite type of music?"
                        },
                        down: {
                            1: "Which of Santa's reindeer has the best moves?",
                            2: "What kind of snowmen have for breakfast?",
                            3: "What kind of car do elves like to drive?",
                            6: "Who hides in a bakery at Christmas?",
                            7: "What do elves post on Social Media?",
                            8: "What do you call a penguin in the Sahara desert?",
                            11: "What do you do get if you eat Christmas decorations?",
                            13: "What would you call an elf who just has won the lottery?",
                            15: "What beats his chest and swings from Christmas cake to Christmas cake?",
                            17: "What falls at the North Pole but never gets hurt?"
                        }
                    }
                }
            ];

            function generateCrosswordGrid() {
                crosswordGridEl.innerHTML = '';
                crosswordGridEl.style.gridTemplateColumns = `repeat(${currentCrossword.gridSize.cols}, 1fr)`;
                gridInputs.length = 0; // Clear previous inputs

                for (let i = 0; i < currentCrossword.grid.length; i++) {
                    const cell = document.createElement('div');
                    cell.classList.add('grid-cell');
                    if (currentCrossword.grid[i] === ' ') {
                        cell.classList.add('black');
                    } else {
                        const input = document.createElement('input');
                        input.type = 'text';
                        input.maxLength = 1;
                        input.dataset.index = i;
                        input.addEventListener('input', handleInput);
                        input.addEventListener('keydown', handleKeyDown);
                        cell.appendChild(input);
                        gridInputs.push(input);
                    }
                    crosswordGridEl.appendChild(cell);
                }
                addClueNumbersToGrid();
            }

            function addClueNumbersToGrid() {
                const acrossClues = currentCrossword.clues.across;
                const downClues = currentCrossword.clues.down;

                // Function to add a clue number to a cell
                const addNumber = (clueNum, row, col) => {
                    const index = row * currentCrossword.gridSize.cols + col;
                    const cellEl = crosswordGridEl.children[index];
                    if (cellEl && !cellEl.querySelector('.clue-number')) {
                        const span = document.createElement('span');
                        span.classList.add('clue-number');
                        span.textContent = clueNum;
                        cellEl.appendChild(span);
                    }
                };

                // Add numbers for Across clues
                for (const num in acrossClues) {
                    const { start } = acrossClues[num];
                    addNumber(num, start.row, start.col);
                }

                // Add numbers for Down clues (only if not already placed by Across)
                for (const num in downClues) {
                    const { start } = downClues[num];
                    addNumber(num, start.row, start.col);
                }
            }


            function renderClues() {
                acrossCluesEl.innerHTML = '';
                downCluesEl.innerHTML = '';

                for (const num in currentCrossword.clues.across) {
                    const li = document.createElement('li');
                    li.textContent = `${num}. ${currentCrossword.clues.across[num]}`;
                    li.dataset.clueNum = num;
                    li.dataset.direction = 'across';
                    acrossCluesEl.appendChild(li);
                }

                for (const num in currentCrossword.clues.down) {
                    const li = document.createElement('li');
                    li.textContent = `${num}. ${currentCrossword.clues.down[num]}`;
                    li.dataset.clueNum = num;
                    li.dataset.direction = 'down';
                    downCluesEl.appendChild(li);
                }
            }

            function handleInput(event) {
                const input = event.target;
                const index = parseInt(input.dataset.index);

                input.value = input.value.toUpperCase(); // Ensure uppercase

                // Move to the next input field
                if (input.value.length === 1) {
                    const nextInput = gridInputs[gridInputs.indexOf(input) + 1];
                    if (nextInput) {
                        nextInput.focus();
                    }
                }
            }

            function handleKeyDown(event) {
                const input = event.target;
                const index = parseInt(input.dataset.index);
                const currentColumn = index % currentCrossword.gridSize.cols;
                const currentRow = Math.floor(index / currentCrossword.gridSize.cols);

                if (event.key === 'Backspace' && input.value === '') {
                    const prevInput = gridInputs[gridInputs.indexOf(input) - 1];
                    if (prevInput) {
                        prevInput.focus();
                    }
                } else if (event.key === 'ArrowRight') {
                    const nextInput = gridInputs[gridInputs.indexOf(input) + 1];
                    if (nextInput) nextInput.focus();
                } else if (event.key === 'ArrowLeft') {
                    const prevInput = gridInputs[gridInputs.indexOf(input) - 1];
                    if (prevInput) prevInput.focus();
                } else if (event.key === 'ArrowDown') {
                    const targetIndex = index + currentCrossword.gridSize.cols;
                    const nextInput = gridInputs.find(i => parseInt(i.dataset.index) === targetIndex);
                    if (nextInput) nextInput.focus();
                } else if (event.key === 'ArrowUp') {
                    const targetIndex = index - currentCrossword.gridSize.cols;
                    const prevInput = gridInputs.find(i => parseInt(i.dataset.index) === targetIndex);
                    if (prevInput) prevInput.focus();
                }
            }

            function checkAnswers() {
                let allCorrect = true;
                crosswordGridEl.querySelectorAll('input').forEach(input => {
                    const index = parseInt(input.dataset.index);
                    const row = Math.floor(index / currentCrossword.gridSize.cols);
                    const col = index % currentCrossword.gridSize.cols;
                    const correctLetter = getCorrectLetter(row, col);

                    input.classList.remove('correct', 'incorrect'); // Clear previous feedback

                    if (input.value.toUpperCase() === correctLetter) {
                        input.classList.add('correct');
                    } else if (input.value !== '') {
                        input.classList.add('incorrect');
                        allCorrect = false;
                    } else {
                        allCorrect = false;
                    }
                });

                // Check and mark clues as found
                markFoundClues();

                if (allCorrect) {
                    alert("Congratulations! You've completed the crossword!");
                }
            }

            function getCorrectLetter(row, col) {
                // This is complex because a cell might belong to multiple words.
                // For simplicity, we'll iterate through all answers and return the letter if found.
                // In a more robust system, each grid cell would store its correct letter directly.
                for (const direction of ['across', 'down']) {
                    for (const num in currentCrossword.answers[direction]) {
                        const answer = currentCrossword.answers[direction][num];
                        const word = answer.word.toUpperCase();
                        const startRow = answer.start.row;
                        const startCol = answer.start.col;

                        if (direction === 'across') {
                            if (row === startRow && col >= startCol && col < startCol + word.length) {
                                return word[col - startCol];
                            }
                        } else { // 'down'
                            if (col === startCol && row >= startRow && row < startRow + word.length) {
                                return word[row - startRow];
                            }
                        }
                    }
                }
                return ''; // Should not happen for valid cells
            }

            function markFoundClues() {
                acrossCluesEl.querySelectorAll('li').forEach(li => li.classList.remove('found'));
                downCluesEl.querySelectorAll('li').forEach(li => li.classList.remove('found'));

                // For each word in answers, check if it's fully correct in the grid
                for (const direction of ['across', 'down']) {
                    for (const num in currentCrossword.answers[direction]) {
                        const answer = currentCrossword.answers[direction][num];
                        const word = answer.word.toUpperCase();
                        const startRow = answer.start.row;
                        const startCol = answer.start.col;
                        let wordIsCorrect = true;

                        for (let i = 0; i < word.length; i++) {
                            let cellIndex;
                            if (direction === 'across') {
                                cellIndex = startRow * currentCrossword.gridSize.cols + (startCol + i);
                            } else { // 'down'
                                cellIndex = (startRow + i) * currentCrossword.gridSize.cols + startCol;
                            }
                            const inputEl = crosswordGridEl.querySelector(`input[data-index="${cellIndex}"]`);
                            if (!inputEl || inputEl.value.toUpperCase() !== word[i]) {
                                wordIsCorrect = false;
                                break;
                            }
                        }

                        if (wordIsCorrect) {
                            document.querySelector(`li[data-clue-num="${num}"][data-direction="${direction}"]`).classList.add('found');
                        }
                    }
                }
            }


            function revealAll() {
                crosswordGridEl.querySelectorAll('input').forEach(input => {
                    const index = parseInt(input.dataset.index);
                    const row = Math.floor(index / currentCrossword.gridSize.cols);
                    const col = index % currentCrossword.gridSize.cols;
                    const correctLetter = getCorrectLetter(row, col);

                    input.value = correctLetter;
                    input.classList.add('revealed');
                    input.classList.remove('correct', 'incorrect');
                    input.disabled = true; // Disable input after revealing
                });
                markFoundClues(); // Mark all clues as found
            }

            function loadRandomCrossword() {
                const randomIndex = Math.floor(Math.random() * crosswords.length);
                currentCrossword = crosswords[randomIndex];
                crosswordTitleEl.textContent = currentCrossword.title;
                generateCrosswordGrid();
                renderClues();
                crosswordGridEl.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                    input.classList.remove('correct', 'incorrect', 'revealed');
                    input.value = '';
                });
            }

            checkAnswersBtn.addEventListener('click', checkAnswers);
            revealAllBtn.addEventListener('click', revealAll);
            newCrosswordBtn.addEventListener('click', loadRandomCrossword);

            // Initial load
            loadRandomCrossword();
        });
    </script>
</body>
</html>
